## Тест-кейсы

---
### Тестирование Telegram Bot

#### **TC-BOT-001: Инициализация бота**
- **Заголовок**: Проверка обработки команды `/start`
- **Предусловия**: Бот запущен и доступен
- **Шаги**:
  1. Отправить команду `/start` в чат с ботом
- **Ожидаемый результат**: Бот отвечает приветственным сообщением с инструкциями
- **Статус**: [ ] Success [ ] Failed [ ] Blocked

#### **TC-BOT-002: Добавление URL для отслеживания**
- **Заголовок**: Проверка команды `/track`
- **Предусловия**: Пользователь авторизован
- **Шаги**:
  1. Отправить `/track https://example.com`
  2. Проверить ответ бота
  3. Запросить `/list`
- **Ожидаемый результат**: URL добавлен в список отслеживаемых
- **Статус**: [ ] Success [ ] Failed [ ] Blocked

#### **TC-BOT-003: Удаление URL**
- **Заголовок**: Проверка команды `/untrack`
- **Предусловия**: URL https://example.com добавлен ранее
- **Шаги**:
  1. Отправить `/untrack https://example.com`
  2. Запросить `/list`
- **Ожидаемый результат**: URL отсутствует в списке
- **Статус**: [ ] Success [ ] Failed [ ] Blocked

---
### Тестирование Scrapper Service

#### **TC-SCR-001: Обнаружение изменений контента**
- **Заголовок**: Проверка реакции на изменение страницы
- **Предусловия**:
  - URL добавлен в систему
  - Контент страницы изменён
- **Шаги**:
  1. Дождаться следующего цикла проверки
  2. Проверить логи сервиса
- **Ожидаемый результат**: Сервис обнаружил изменения и отправил уведомление
- **Статус**: [ ] Success [ ] Failed [ ] Blocked

#### **TC-SCR-002: Обработка недоступного ресурса**
- **Заголовок**: Проверка реакции на 404 ошибку
- **Предусловия**: URL ведёт на несуществующую страницу
- **Шаги**:
  1. Добавить `/track http://nonexistent.example`
  2. Проверить логи через 5 минут
- **Ожидаемый результат**: В логах запись о недоступности ресурса
- **Статус**: [ ] Success [ ] Failed [ ] Blocked

---
### Интеграционные тесты

#### **TC-INT-001: Сквозной сценарий уведомления**
- **Заголовок**: Проверка полного цикла уведомления
- **Предусловия**:
  - Пользователь подписан на URL
  - Scrapper сервис запущен
- **Шаги**:
  1. Вручную изменить контент тестовой страницы
  2. Дождаться цикла проверки
  3. Проверить получение уведомления в Telegram
- **Ожидаемый результат**: Пользователь получает корректное уведомление
- **Статус**: [ ] Success [ ] Failed [ ] Blocked

#### **TC-INT-002: Взаимодействие при перезапуске**
- **Заголовок**: Проверка сохранения данных после рестарта
- **Предусловия**: Есть активные подписки
- **Шаги**:
  1. Выполнить `docker-compose restart`
  2. Запросить `/list`
- **Ожидаемый результат**: Список подписок сохранён
- **Статус**: [ ] Success [ ] Failed [ ] Blocked

---
### Тесты производительности

#### **TC-PERF-001: Нагрузочное тестирование**
- **Заголовок**: Проверка обработки 100+ URL
- **Предусловия**: Система развёрнута
- **Шаги**:
  1. Добавить 100 тестовых URL
  2. Замерить время полного цикла проверки
- **Ожидаемый результат**: Время цикла не превышает 15 минут
- **Статус**: [ ] Success [ ] Failed [ ] Blocked

---
### Тесты безопасности

#### **TC-SEC-001: Валидация входных данных**
- **Заголовок**: Проверка обработки некорректных URL
- **Шаги**:
  1. Отправить `/track javascript:alert(1)`
  2. Отправить `/track http://localhost/internal`
- **Ожидаемый результат**: Бот отклоняет опасные URL
- **Статус**: [ ] Success [ ] Failed [ ] Blocked

#### **TC-SEC-002: SQL-инъекции**
- **Заголовок**: Проверка устойчивости к инъекциям
- **Шаги**:
  1. Отправить `/track '; DROP TABLE users--`
- **Ожидаемый результат**: Команда отклонена, БД не повреждена
- **Статус**: [ ] Success [ ] Failed [ ] Blocked
---
